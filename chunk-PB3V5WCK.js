import{a as B,b as j,c as M,e as R}from"./chunk-NNJTDUZN.js";import{Aa as z,a as S,b as P,d as E,e as x,g as I,h as T,i as V,m as N,n as D}from"./chunk-RZCM5SQZ.js";import{Da as t,Ea as o,Fb as k,Hb as F,J as w,Ma as m,P as y,Q as _,Wa as s,Xa as v,ha as l,ia as u,pb as h,sa as f,sb as O,ua as c}from"./chunk-4H7K6CBI.js";function q(r,i){r&1&&(t(0,"p",15),s(1," Debes introducir un n\xFAmero de C\xE9dula v\xE1lido "),o())}function A(r,i){r&1&&(t(0,"p",15),s(1," Debes introducir un n\xFAmero de C\xE9dula v\xE1lido "),o())}function H(r,i){r&1&&(t(0,"p",15),s(1," Debes una contrase\xF1a con al menos 8 caracteres "),o())}function Y(r,i){r&1&&(t(0,"p",15),s(1," Amabas contrase\xF1as deben coincidir "),o())}var C=class r{constructor(i,n,e,a){this.fb=i;this.loginService=n;this._snackBar=e;this.router=a}forgotPasswordForm;attemptedSubmit=!1;passwordFieldType="password";confirmPasswordFieldType="password";openSnackBar(i,n){this._snackBar.open(i,n,{duration:2e3})}formatID(i){let n=i.target,e=n.value.replace(/-/g,"");e.length>3&&(e=e.slice(0,3)+"-"+e.slice(3)),e.length>11&&(e=e.slice(0,11)+"-"+e.slice(11,12)),n.value=e,this.forgotPasswordForm.get("username")?.setValue(e,{emitEvent:!1})}ngOnInit(){this.forgotPasswordForm=this.fb.group({email:["",[P.required,j]],username:["",[P.required,B]],newPassword:["",[P.required,M]],confirmPassword:["",[P.required,M]]})}checkValidity(){let i=this.forgotPasswordForm.get("email")?.valid,n=this.forgotPasswordForm.get("username")?.valid,e=this.forgotPasswordForm.get("newPassword")?.valid,a=this.forgotPasswordForm.get("confirmPassword")?.valid,d=this.forgotPasswordForm.get("newPassword")?.value,p=this.forgotPasswordForm.get("confirmPassword")?.value;return!!(n&&i&&e&&a&&d===p)}togglePasswordVisibility(){this.passwordFieldType=this.passwordFieldType==="password"?"text":"password"}toggleConfirmPasswordVisibility(){this.confirmPasswordFieldType=this.confirmPasswordFieldType==="password"?"text":"password"}recoverPassword(){if(this.attemptedSubmit=!0,this.checkValidity()){let i=this.forgotPasswordForm.get("username")?.value,n=this.forgotPasswordForm.get("email")?.value,e=this.forgotPasswordForm.get("newPassword")?.value,a={email:n,username:i,password:e};this.loginService.changePassword(a).subscribe(d=>{d===!1?this.openSnackBar("La c\xE9dula no coincide con el correo electronico","Cerrar"):(this.openSnackBar("El cambio de contrase\xF1a ha sido efectuado","Cerrar"),this.router.navigate(["/login"]))})}}static \u0275fac=function(n){return new(n||r)(u(N),u(R),u(z),u(k))};static \u0275cmp=y({type:r,selectors:[["app-forgot-password"]],decls:35,vars:10,consts:[[1,"login-container"],[1,"login-form"],[3,"formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Ingresa tu correo electr\xF3nico",3,"input"],["class","error-message",4,"ngIf"],["for","username"],["type","username","id","username","formControlName","username","placeholder","Ingresa tu C\xE9dula",3,"input"],[1,"password-container"],["id","newPassword","formControlName","newPassword","placeholder","Ingresa tu contrase\xF1a",3,"input","type"],["type","button",1,"toggle-password",3,"click"],[1,"material-icons"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Ingresa tu contrase\xF1a",3,"input","type"],[1,"submit-btn",3,"click","disabled"],[1,"error-message"]],template:function(n,e){if(n&1&&(t(0,"div",0)(1,"section",1)(2,"h1"),s(3,"Recuperar Contrase\xF1a"),o(),t(4,"form",2)(5,"div",3)(6,"label",4),s(7,"Email"),o(),t(8,"input",5),m("input",function(){return e.checkValidity()}),o(),f(9,q,2,0,"p",6),o(),t(10,"div",3)(11,"label",7),s(12,"C\xE9dula"),o(),t(13,"input",8),m("input",function(d){return e.checkValidity(),e.formatID(d)}),o(),f(14,A,2,0,"p",6),o(),t(15,"div",3)(16,"label",7),s(17,"Nueva contrase\xF1a"),o(),t(18,"div",9)(19,"input",10),m("input",function(){return e.checkValidity()}),o(),t(20,"button",11),m("click",function(){return e.togglePasswordVisibility()}),t(21,"span",12),s(22),o()()(),f(23,H,2,0,"p",6),o(),t(24,"div",3)(25,"label",7),s(26,"Confirmar nueva contrase\xF1a"),o(),t(27,"div",9)(28,"input",13),m("input",function(){return e.checkValidity()}),o(),t(29,"button",11),m("click",function(){return e.toggleConfirmPasswordVisibility()}),t(30,"span",12),s(31),o()()(),f(32,Y,2,0,"p",6),o(),t(33,"button",14),m("click",function(){return e.recoverPassword()}),s(34," Recupera tu contrase\xF1a "),o()()()()),n&2){let a,d,p,g;l(4),c("formGroup",e.forgotPasswordForm),l(5),c("ngIf",((a=e.forgotPasswordForm.get("email"))==null?null:a.dirty)&&!((a=e.forgotPasswordForm.get("email"))!=null&&a.valid)),l(5),c("ngIf",((d=e.forgotPasswordForm.get("username"))==null?null:d.dirty)&&!((d=e.forgotPasswordForm.get("username"))!=null&&d.valid)),l(5),c("type",e.passwordFieldType),l(3),v(e.passwordFieldType==="password"?"visibility":"visibility_off"),l(),c("ngIf",((p=e.forgotPasswordForm.get("newPassword"))==null?null:p.dirty)&&!((p=e.forgotPasswordForm.get("newPassword"))!=null&&p.valid)),l(5),c("type",e.confirmPasswordFieldType),l(3),v(e.confirmPasswordFieldType==="password"?"visibility":"visibility_off"),l(),c("ngIf",((g=e.forgotPasswordForm.get("confirmPassword"))==null?null:g.dirty)&&!((g=e.forgotPasswordForm.get("confirmPassword"))!=null&&g.valid)||!e.checkValidity()&&((g=e.forgotPasswordForm.get("confirmPassword"))==null?null:g.dirty)),l(),c("disabled",!e.checkValidity())}},dependencies:[h,I,S,E,x,T,V],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:url(/assets/hero-about-us.jpeg) no-repeat center;background-size:cover}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{background-color:#fff;padding:40px;border-radius:8px;box-shadow:0 4px 10px #0000001a;width:100%;max-width:400px;text-align:center}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#4caf50;font-size:2rem;margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px;text-align:left;position:relative}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:1rem;color:#333;margin-bottom:5px}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:1rem;margin-bottom:10px;box-sizing:border-box}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4caf50;outline:none}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:12px;font-size:1rem;border:none;border-radius:8px;cursor:pointer;width:100%;transition:background-color .3s ease}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background-color:#3d8b40}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{background-color:gray;color:#000;padding:12px;font-size:1rem;border:none;border-radius:8px;cursor:not-allowed;width:100%;transition:background-color .3s ease}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{margin-top:15px}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#4caf50;font-size:.9rem;text-decoration:none;display:block;margin-top:10px}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red}.login-container[_ngcontent-%COMP%]   .password-container[_ngcontent-%COMP%]{position:relative}.login-container[_ngcontent-%COMP%]   .password-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:calc(100% - 40px);display:inline-block}.login-container[_ngcontent-%COMP%]   .password-container[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;padding:0;margin:0}.login-container[_ngcontent-%COMP%]   .password-container[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:#333}"]})};var J=[{path:"",component:C}],b=class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=_({type:r});static \u0275inj=w({imports:[F.forChild(J),F]})};var L=class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=_({type:r});static \u0275inj=w({imports:[O,D,b]})};export{L as ForgotPasswordModule};
