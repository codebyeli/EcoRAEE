<div class="login-container">
    <section class="login-form">
      <h1>Registrarse</h1>
      <form [formGroup]="registerForm"> 
        <div class="form-group">
          <label for="name">Nombre</label>
          <input
            type="text"
            id="name"
            formControlName="name"
            placeholder="Ingresa tu nombre"
            (input)="checkValidity()"
          />
          <p *ngIf="registerForm.get('name')?.dirty && !registerForm.get('name')?.valid" class="error-message">Debes introducir tu nombre</p>

        </div>
        
        <div class="form-group">
          <label for="lastName">Apellido</label>
          <input
            type="text"
            id="lastName"
            formControlName="lastName"
            placeholder="Ingresa tu apellido"
            (input)="checkValidity()"
          />
          <p *ngIf="registerForm.get('lastName')?.dirty && !registerForm.get('lastName')?.valid" class="error-message">Debes introducir tu apellido</p>

        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="Ingresa tu correo electrónico"
            (input)="checkValidity()"
          />
          <p *ngIf="registerForm.get('email')?.dirty && !registerForm.get('email')?.valid" class="error-message">Debes introducir un correo electrónico válido</p>

        </div>

        <div class="form-group">
          <label for="birthday">Fecha de nacimiento</label>
          <input
            type="date"
            id="birthday"
            formControlName="birthday"
            placeholder="Ingresa tu fecha de nacimiento"
            min='1899-01-01'
            max='2000-01-01'
            (input)="checkValidity()"
          />
          <p *ngIf="registerForm.get('birthday')?.touched && !registerForm.get('birthday')?.valid" class="error-message">Debes introducir una fecha de nacimiento válida</p>

        </div>

        <div class="form-group">
          <label for="username">Cédula</label>
          <input
            type="text"
            id="username"
            formControlName="username"
            placeholder="Ingresa tu Cédula"
            (input)="checkValidity(); formatID($event)"
          />
          <p *ngIf="registerForm.get('username')?.dirty && !registerForm.get('username')?.valid" class="error-message">Debes introducir un número de Cédula válido</p>
        </div>
  
        <div class="form-group">
          <label for="password">Contraseña</label>
          <div class="password-container">
            <input
              [type]="passwordFieldType"
              id="password"
              formControlName="password"
              placeholder="Ingresa tu contraseña"
              (input)="checkValidity()"
            />
            <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
              <span class="material-icons">{{ passwordFieldType === 'password' ? 'visibility' : 'visibility_off' }}</span>
            </button>
          </div>
          <p *ngIf="registerForm.get('password')?.dirty && !registerForm.get('password')?.valid" class="error-message">Debes una contraseña con al menos 8 caracteres</p>
        </div>
        <div class="form-group">
          <label for="password">Confirma tu contraseña</label>
          <div class="password-container">
            <input
              [type]="confirmPasswordFieldType"
              id="confirmPassword"
              formControlName="confirmPassword"
              placeholder="Confirma tu contraseña"
              (input)="checkValidity()"
            />
            <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
              <span class="material-icons">{{ confirmPasswordFieldType === 'password' ? 'visibility' : 'visibility_off' }}</span>
            </button>
          </div>
          <p
          *ngIf="
            (registerForm.get('confirmPassword')?.dirty &&
              !registerForm.get('confirmPassword')?.valid) ||
            (!checkValidity() &&
              registerForm.get('confirmPassword')?.dirty)
          "
          class="error-message"
        >
          Amabas contraseñas deben coincidir
        </p>
          <p *ngIf="registerForm.get('confirmPassword')?.dirty && !registerForm.get('password')?.valid" class="error-message">Debes una contraseña con al menos 8 caracteres</p>
        </div>
        <button class="submit-btn" (click)="register()" [disabled]="!checkValidity()">Registrate</button>
      </form>
  
      <div class="links">
        <a [routerLink]="['/login']" class="link">¿Ya tienes cuenta? Inicia sesión</a>
      </div>
    </section>
  </div>
  